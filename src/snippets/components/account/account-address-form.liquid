{% assign default = false %}
{% if address.id != null %}
  {% assign address_id = address.id %}
  {% if address == default_address %}
    {% assign default = true %}
  {% endif %}
{% else %}
  {% assign address_id = 'new' %}
{% endif %}

<div class="account-address-form hidden" id="account-address-form-{{ address_id }}">
  <a class="inline-flex items-center sub-l caps" data-cancel-address href="javascript:void(0)">
    {%- render 'icon-back' -%}
    <span class="ml-4">Back to Addresses</span>
  </a>
  <h1 class="text-h4 md:text-h2 mt-8">
    {% if address_id == 'new' %}Add an Address{% else %}Edit Address{% endif %}
  </h1>

  <div class="mt-8">
    {%- comment -%} Address Form {%- endcomment -%}
    {% form 'customer_address', address, class: 'form w-full grid grid-cols-2 gap-6' %}
      {%- comment -%} First Name {%- endcomment -%}
      <div class="col-span-2 lg:col-span-1 input-wrap mt-6">
        <label class="input-label" for="address-{{ address_id }}-form-firstname">First Name</label>
        <input
          type="text"
          id="address-{{ address_id }}-form-firstname"
          name="address[first_name]"
          value="{% if form.first_name %}{{ form.first_name }}{% endif %}" data-default="{{ form.first_name }}"
          placeholder="Enter First Name"
          required
          data-error-message="This input is required"
        >
        <div class="input-error-message" data-error-for="input-error">
          {%- render 'alert' -%}
          <span>This is a required field.</span>
        </div>
      </div>

      <div class="col-span-2 lg:col-span-1 input-wrap mt-6">
        <label class="input-label" for="address-{{ address_id }}-form-lastname">Last Name</label>
        <input
          type="text"
          id="address-{{ address_id }}-form-lastname"
          name="address[last_name]"
          value="{% if form.last_name %}{{ form.last_name }}{% endif %}" data-default="{{ form.last_name }}"
          placeholder="Enter Last Name"
          required
          data-error-message="This input is required"
        >
        <div class="input-error-message" data-error-for="input-error">
          {%- render 'alert' -%}
          <span>This is a required field.</span>
        </div>
      </div>

      <div class="col-span-2 lg:col-span-1 input-wrap mt-6">
        <label class="input-label" for="address-{{ address_id }}-form-address1">Address</label>
        <input
          type="text"
          id="address-{{ address_id }}-form-address1"
          name="address[address1]"
          value="{% if form.address1 %}{{ form.address1 }}{% endif %}" data-default="{{ form.address1 }}"
          placeholder="Enter Address"
          required
          data-error-message="This input is required"
        >
        <div class="input-error-message" data-error-for="input-error">
          {%- render 'alert' -%}
          <span>This is a required field.</span>
        </div>
      </div>

      <div class="col-span-2 lg:col-span-1 input-wrap mt-6">
        <label class="input-label" for="address-{{ address_id }}-form-address2">Address</label>
        <input
          type="text"
          id="address-{{ address_id }}-form-address2"
          name="address[address2]"
          value="{% if form.address2 %}{{ form.address2 }}{% endif %}" data-default="{{ form.address2 }}"
          placeholder="Enter Address 2"
          data-error-message="This input is required"
        >
        <div class="input-error-message" data-error-for="input-error">
          {%- render 'alert' -%}
          <span>This is a required field.</span>
        </div>
      </div>
      
      <div class="col-span-2 lg:col-span-1 input-wrap mt-6">
        <label class="input-label" for="address-{{ address_id }}-form-address1">City</label>
        <input
          type="text"
          id="address-{{ address_id }}-form-city"
          name="address[city]"
          value="{% if form.city %}{{ form.city }}{% endif %}" data-default="{{ form.city }}"
          placeholder="Enter City"
          required
          data-error-message="This input is required"
        >
        <div class="input-error-message" data-error-for="input-error">
          {%- render 'alert' -%}
          <span>This is a required field.</span>
        </div>
      </div>

      <div class="col-span-2 lg:col-span-1 select-wrap mt-6">
        <label class="input-label" for="address-{{ address_id }}-form-address1">State</label>
        <select
          name="address[province]"
          id="address-{{ address_id }}-form-state"
          class="account-province"
          data-default="{% if form.province %}{{ form.province }}{% endif %}"
          required
          data-error-message="This select is required"
        >
          <option value="">Selet State</option>
        </select>
        <div class="input-error-message" data-error-for="input-error">
          {%- render 'alert' -%}
          <span>This is a required field.</span>
        </div>
      </div>

      <div class="col-span-2 lg:col-span-1 input-wrap mt-6">
        <label class="input-label" for="address-{{ address_id }}-form-address1">ZipCode</label>
        <input
          type="text"
          id="address-{{ address_id }}-form-zip"
          name="address[zip]"
          value="{% if form.zip %}{{ form.zip }}{% endif %}" data-default="{{ form.zip }}"
          placeholder="Enter ZipCode"
          required
          data-error-message="This input is required"
        >
        <div class="input-error-message" data-error-for="input-error">
          {%- render 'alert' -%}
          <span>This is a required field.</span>
        </div>
      </div>

      <div class="col-span-2 lg:col-span-1 select-wrap mt-6">
        <label class="input-label" for="address-{{ address_id }}-form-address1">Country</label>
        <select
          name="address[country]"
          id="address-{{ address_id }}-form-state"
          class="account-country"
          data-default="{% if form.country %}{{ form.country }}{% endif %}"
          required
          data-error-message="This select is required"
        >
          <option value="">Select Country</option>
          {{ country_option_tags }}
        </select>
        <div class="input-error-message" data-error-for="input-error">
          {%- render 'alert' -%}
          <span>This is a required field.</span>
        </div>
      </div>
      
      <div class="col-span-2 check-wrap">
        <input type="checkbox" name="address[default]" id="address-{{ address_id }}-form-default" value="1" data-default="{{ default }}" {% if default %} checked {% endif %}>
        <label for="address-{{ address_id }}-form-default">Set as Default</label>
      </div>

      {%- comment -%} Submit + Cancel {%- endcomment -%}
      <div class="col-span-2 !mt-10 text-center">
        <button class="inline-block button button--secondary" type="submit">Save</button>
      </div>
    {% endform %}
  </div>
</div>
